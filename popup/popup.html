<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <link rel="stylesheet" href="popup.css" />
  <title>Tečaj</title>
</head>

<body onload="documentLoaded(this)">
  <div class="dropOut">
    <ul id="currency-list">
    </ul>
  </div>

  <script src="lib/hnb-tecaj.js"></script>
  <script src="lib/util.js"></script>
  <script src="lib/jquery-3.1.1.min.js"></script>

  <!-- 
  RELEASE 
  <script src="lib/hnb-tecaj.js"></script>
  <script src="lib/util.js"></script>
  <script src="lib/jquery-3.1.1.min.js"></script>
   
   DEBUG
  <script src="../lib/hnb-tecaj.js"></script>
  <script src="../lib/util.js"></script>
  <script src="../lib/jquery-3.1.1.min.js"></script>
  -->

  <script type="text/javascript">
    document.addEventListener("click", (e) => {
      if (e.target.classList.contains("button-close")) {
        window.close();
        return;
      }
    });

    function menuItemClick(element) {}

    function documentLoaded(bodyElement) {
      var hnbfetch = new HnbDataDownloader();
      hnbfetch.getData(new Date());
      var list = new CurrencyList(hnbfetch.Data);
      for (var i = 0; i < list.Items.length; i++)
      {
        var currency = list.Items[i];
        var listItemText = currency.Unit + " <strong>" + currency.Abbrevation + '</strong>=' + currency.Rate.MiddleRate + " kn";
        var listItemHtml = String.format('<li id="curr-{0}" value="{1}">{2}</li>', currency.Code, currency.Rate.MiddleRate, listItemText);
        $('#currency-list').append($(listItemHtml));
      }      
    }
  </script>
</body>

</html>